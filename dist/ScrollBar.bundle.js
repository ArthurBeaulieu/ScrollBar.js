/*! For license information please see ScrollBar.bundle.js.LICENSE.txt */
!function(){"use strict";var t={};function e(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._target=e.target,this._horizontal=e.horizontal||!1,this._minSize=e.minSize||15,this._style=e.style||{},this._wrapper={},this._container={},this._bar={},this._scrollRatio=0,this._lastPageX=0,this._lastPageY=0,this._init().then(this._events.bind(this)).then(this._updateScrollBar.bind(this))}var i,r;return i=t,(r=[{key:"_init",value:function(){var t=this;return new Promise((function(e){var i=document.createDocumentFragment();for(t._target.classList.add("scrollbar-container"),t._wrapper=document.createElement("DIV"),t._wrapper.setAttribute("class","scrollbar-wrapper"),t._container=document.createElement("DIV"),!0===t._horizontal?t._container.setAttribute("class","horizontal-scrollbar-content"):t._container.setAttribute("class","scrollbar-content");t._target.firstChild;)t._container.appendChild(t._target.firstChild);t._wrapper.appendChild(t._container),i.appendChild(t._wrapper),t._target.appendChild(i),!0===t._horizontal?t._target.insertAdjacentHTML("beforeend",'<div class="horizontal-scroll"></div>'):t._target.insertAdjacentHTML("beforeend",'<div class="scroll"></div>'),t._bar=t._target.lastChild,t._style.color&&t._target.style.setProperty("--scroll-color",t._style.color),t._style.size&&t._target.style.setProperty("--scroll-size",t._style.size),t._style.radius&&t._target.style.setProperty("--scroll-radius",t._style.radius),t._style.lowOpacity&&t._target.style.setProperty("--scroll-low-opacity",t._style.lowOpacity),t._style.highOpacity&&t._target.style.setProperty("--scroll-high-opacity",t._style.highOpacity),t._style.transitionDuration&&t._target.style.setProperty("--scroll-transition-duration",t._style.transitionDuration),e()}))}},{key:"_events",value:function(){var t=this;return new Promise((function(e){t._drag=t._drag.bind(t),t._stopDrag=t._stopDrag.bind(t),window.addEventListener("resize",t._updateScrollBar.bind(t)),t._container.addEventListener("scroll",t._updateScrollBar.bind(t)),t._container.addEventListener("mouseenter",t._updateScrollBar.bind(t)),t._bar.addEventListener("mousedown",t._barClicked.bind(t)),e()}))}},{key:"_barClicked",value:function(t){var e=this;!0===this._horizontal?this._lastPageX=t.pageX:this._lastPageY=t.pageY,this._bar.classList.add("scrollbar-grabbed"),document.body.classList.add("scrollbar-grabbed"),requestAnimationFrame((function(){document.addEventListener("mousemove",e._drag),document.addEventListener("mouseup",e._stopDrag)}))}},{key:"_drag",value:function(t){var e=this;if(!0===this._horizontal){var i=t.pageX-this._lastPageX;this._lastPageX=t.pageX,requestAnimationFrame((function(){e._container.scrollLeft+=i/e._scrollRatio}))}else{var r=t.pageY-this._lastPageY;this._lastPageY=t.pageY,requestAnimationFrame((function(){e._container.scrollTop+=r/e._scrollRatio}))}}},{key:"_stopDrag",value:function(){this._bar.classList.remove("scrollbar-grabbed"),document.body.classList.remove("scrollbar-grabbed"),document.removeEventListener("mousemove",this._drag),document.removeEventListener("mouseup",this._stopDrag)}},{key:"_updateScrollBar",value:function(){var t=this;if(!0===this._horizontal){var e=this._container.scrollWidth,i=this._container.clientWidth,r=-1*(this._target.clientHeight-this._bar.clientHeight);this._scrollRatio=i/e,requestAnimationFrame((function(){if(t._scrollRatio>=1)t._bar.classList.add("hidden");else{var s=Math.max(100*t._scrollRatio,t._minSize)*i/100,a=t._container.scrollLeft/e*100*i/100;if(Math.max(100*t._scrollRatio,t._minSize)===t._minSize){s=t._minSize<i?t._minSize:i/2;var o=100*t._container.scrollLeft/(e-i);a=(i-s)*((t._container.scrollLeft+o*i/100)/e*100)/100}t._bar.classList.remove("hidden"),t._bar.style.cssText="width: ".concat(s,"px; left: ").concat(a,"px; bottom: ").concat(r,"px;")}}))}else{var s=this._container.scrollHeight,a=this._container.clientHeight,o=-1*(this._target.clientWidth-this._bar.clientWidth);this._scrollRatio=a/s,requestAnimationFrame((function(){if(t._scrollRatio>=1)t._bar.classList.add("hidden");else{var e=Math.max(100*t._scrollRatio,t._minSize)*a/100,i=t._container.scrollTop/s*100*a/100;if(Math.max(100*t._scrollRatio,t._minSize)===t._minSize){e=t._minSize<a?t._minSize:a/2;var r=100*t._container.scrollTop/(s-a);i=(a-e)*((t._container.scrollTop+r*a/100)/s*100)/100}t._bar.classList.remove("hidden"),t._bar.style.cssText="height: ".concat(e,"px; top: ").concat(i,"px; right: ").concat(o,"px;")}}))}}},{key:"updateScrollbar",value:function(){this._updateScrollBar()}},{key:"style",set:function(t){this._style=t,this._style.color&&this._target.style.setProperty("--scroll-color",this._style.color),this._style.size&&this._target.style.setProperty("--scroll-size",this._style.size),this._style.radius&&this._target.style.setProperty("--scroll-radius",this._style.radius),this._style.lowOpacity&&this._target.style.setProperty("--scroll-low-opacity",this._style.lowOpacity),this._style.highOpacity&&this._target.style.setProperty("--scroll-high-opacity",this._style.highOpacity),this._style.transitionDuration&&this._target.style.setProperty("--scroll-transition-duration",this._style.transitionDuration)}}])&&e(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),t}();t.default=i,window.ScrollBar=t.default}();